<!doctype html>
<html lang="sv" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Bredbands- & TV-kompassen ‚Äî Churnl√§ge</title>
<style>
:root{
 --bg:#0f1115;--card:#141820;--line:#242b3a;--text:#e9edf5;--muted:#99a2b2;--accent:#7aa2ff;
 --tip:#11161f;--tip-border:#2a3344;
}
html[data-theme=light]{--bg:#f6f7fb;--card:#fff;--line:#e0e4ef;--text:#10131a;--muted:#5b6575;--accent:#3b6aff;--tip:#fff;--tip-border:#d6d9e4}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
header{padding:16px;border-bottom:1px solid var(--line);display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
h1{margin:0;font-size:18px}
.right{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.btn{border:1px solid var(--line);background:transparent;color:inherit;border-radius:10px;padding:6px 10px;cursor:pointer;font-weight:600}
.btn.primary{background:var(--accent);color:#fff;border:none}
.searchbar{display:flex;align-items:center;gap:6px;background:var(--card);border:1px solid var(--line);border-radius:10px;padding:6px 8px}
.searchbar input{all:unset;width:180px}
main{max-width:1200px;margin:0 auto;padding:16px;display:grid;grid-template-columns:1fr 360px;gap:16px}
@media(max-width:900px){main{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:14px}
details.widget{border:1px solid var(--line);border-radius:10px;margin-bottom:10px}
details>summary{list-style:none;padding:8px 10px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-weight:700}
details>summary::-webkit-details-marker{display:none}
.caret{transition:.2s}
details[open] .caret{transform:rotate(90deg)}
.widget-body{border-top:1px dashed var(--line);padding:10px}
.plan{display:grid;grid-template-columns:1fr 80px 90px 90px;align-items:center;gap:8px;border:1px solid var(--line);border-radius:10px;padding:6px 8px;margin:6px 0;position:relative}
.plan:hover{background:rgba(122,162,255,.05)}
.plan input[type=number]{width:100%;background:var(--card);border:1px solid var(--line);color:var(--text);border-radius:6px;padding:3px 4px;text-align:right}
.plan .disc{font-size:12px;color:var(--muted);text-align:right}
.plan.selected{border-color:var(--accent);box-shadow:0 0 0 2px rgba(122,162,255,.25)}
.tip{display:none;position:absolute;z-index:10;bottom:110%;left:8px;background:var(--tip);border:1px solid var(--tip-border);border-radius:8px;padding:8px;max-width:300px}
.plan:hover .tip{display:block}
.total-card .row{display:flex;justify-content:space-between;margin:6px 0}
.total-card .grand{font-size:20px;font-weight:700}
.chip{background:rgba(122,162,255,.1);border:1px solid var(--line);border-radius:999px;padding:2px 8px;font-size:12px;margin:2px}
hr{border:0;border-top:1px dashed var(--line);margin:8px 0}
</style>
</head>
<body>
<header>
 <h1>Bredbands- & TV-kompassen</h1>
 <div class="right">
   <div class="searchbar">
     üîé <input id="ask" placeholder="S√∂k Netflix, Champions League...">
     <button id="clr" class="btn">Rensa</button>
   </div>
   <button id="churnToggle" class="btn primary">Aktivera Churn-l√§ge</button>
   <button id="themeBtn" class="btn">Tema</button>
   <button id="resetBtn" class="btn">√Öterst√§ll</button>
 </div>
</header>

<main>
 <section id="services" class="card"></section>

 <aside class="card total-card">
   <h2>Summering</h2>
   <div id="chips"></div><hr>
   <div class="row"><div>Ordinarie pris/m√•n</div><div id="ordTot">0 SEK</div></div>
   <div class="row"><div>Kundpris/m√•n</div><div id="kundTot" class="grand">0 SEK</div></div>
   <div class="row"><div>Rabatt</div><div id="rabTot">0 SEK (0 %)</div></div>
   <hr>
   <div class="row"><div>√Örlig int√§ktsf√∂rlust</div><div id="loss">0 SEK</div></div>
   <hr>
   <button id="copyBtn" class="btn primary" style="width:100%">Kopiera rapport</button>
 </aside>
</main>

<script>
const DATA=[
 {cat:"Bredband",plans:[
  {id:"bb100",label:"100/100 Mbit/s",price:599,info:"Fast bredband fiber 100/100"},
  {id:"bb300",label:"300/300 Mbit/s",price:389,info:"Fast bredband fiber 300/300"},
  {id:"bb1000",label:"1000/1000 Mbit/s",price:599,info:"Fast bredband fiber 1 Gbit"}
 ]},
 {cat:"TV grundpaket",plans:[
  {id:"mini",label:"TV Mini",price:149,info:"19 kanaler, TV4 Play Plus m. reklam"},
  {id:"mellan",label:"TV Mellan",price:249,info:"36 kanaler + Britbox"},
  {id:"mycket",label:"TV Mycket",price:499,info:"48 kanaler, Viaplay Medium + HBO Max"}
 ]},
 {cat:"Premium TV/Streaming",plans:[
  {id:"mer",label:"Streaming Mer",price:199,info:"Netflix Std + HBO Max + Disney+"},
  {id:"maxad",label:"Streaming Maxad",price:299,info:"Netflix Std + HBO Max + Disney+ + Prime"},
  {id:"mest",label:"Streaming Mest",price:499,info:"Netflix + HBO Max + Disney+ + Prime + Viaplay"}
 ]},
 {cat:"Sport",plans:[
  {id:"lilla",label:"Lilla sportpaketet",price:249,info:"TV4 Sport + HBO Max + Disney+ + Prime"},
  {id:"stora",label:"Stora sportpaketet",price:699,info:"Champions League / Premier League / F1"},
  {id:"storsta",label:"St√∂rsta sportpaketet",price:999,info:"All sport: SHL, PL, F1, CL, Golf"}
 ]}
];
let churn=false;
const fmt=v=>`${v.toFixed(0)} SEK`;
function build(){
 const wrap=document.getElementById('services');
 wrap.innerHTML='';
 DATA.forEach(s=>{
  const det=document.createElement('details');det.className='widget';det.open=true;
  det.innerHTML=`<summary>${s.cat}<span class="caret">‚ñ∂</span></summary>
   <div class="widget-body">
    ${s.plans.map(p=>`
     <div class="plan" data-id="${p.id}" data-price="${p.price}">
       <label><input type="radio" name="${s.cat}" value="${p.id}"> ${p.label}</label>
       <div class="ord">${fmt(p.price)}</div>
       <input type="number" class="kund" value="${p.price}" min="0" step="1" ${churn?'':'hidden'}>
       <div class="disc">${churn?'0 %':''}</div>
       <div class="tip"><b>${p.label}</b><br>${p.info}</div>
     </div>`).join('')}
   </div>`;
  wrap.appendChild(det);
 });
 document.querySelectorAll('.plan input[type=radio]').forEach(r=>r.addEventListener('change',calc));
 if(churn)document.querySelectorAll('.kund').forEach(inp=>inp.addEventListener('input',calc));
}
function calc(){
 let ord=0,kund=0;
 document.querySelectorAll('.plan.selected').forEach(el=>el.classList.remove('selected'));
 document.querySelectorAll('input[type=radio]:checked').forEach(r=>{
   const row=r.closest('.plan');row.classList.add('selected');
   const p=+row.dataset.price;const k=churn?+row.querySelector('.kund').value||0:p;
   ord+=p;kund+=k;
   if(churn){
     const diff=p-k;const perc=diff/p*100;
     row.querySelector('.disc').textContent=`-${diff.toFixed(0)} SEK (${perc.toFixed(0)} %)`;
   }
 });
 const rab=ord-kund;
 document.getElementById('ordTot').textContent=fmt(ord);
 document.getElementById('kundTot').textContent=fmt(kund);
 document.getElementById('rabTot').textContent=`-${fmt(rab)} (${((rab/ord)*100||0).toFixed(0)} %)`;
 document.getElementById('loss').textContent=fmt(rab*12);
}
document.getElementById('churnToggle').onclick=()=>{
 churn=!churn;
 document.getElementById('churnToggle').textContent=churn?'St√§ng Churn-l√§ge':'Aktivera Churn-l√§ge';
 build();calc();
};
document.getElementById('resetBtn').onclick=()=>{document.querySelectorAll('input').forEach(i=>i.checked=false);calc();};
document.getElementById('themeBtn').onclick=()=>{
 const html=document.documentElement;
 html.dataset.theme=html.dataset.theme==='light'?'dark':'light';
};
document.getElementById('ask').oninput=e=>{
 const q=e.target.value.toLowerCase();
 document.querySelectorAll('.plan').forEach(p=>{
   p.style.outline=(p.textContent.toLowerCase().includes(q)&&q)?'2px solid var(--accent)':'none';
 });
};
document.getElementById('clr').onclick=()=>{document.getElementById('ask').value='';document.querySelectorAll('.plan').forEach(p=>p.style.outline='none');};
document.getElementById('copyBtn').onclick=()=>{
 const txt=`Churn-rapport\n\nOrdinarie: ${document.getElementById('ordTot').textContent}\nKundpris: ${document.getElementById('kundTot').textContent}\nRabatt: ${document.getElementById('rabTot').textContent}\nF√∂rlust/√•r: ${document.getElementById('loss').textContent}`;
 navigator.clipboard.writeText(txt);
};
build();calc();
</script>
</body>
</html>
